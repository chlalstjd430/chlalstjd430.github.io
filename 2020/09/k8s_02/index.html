<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <title>
        [Kubernets/μΏ λ²„λ„¤ν‹°μ¤] 02. μΏ λ²„λ„¤ν‹°μ¤ μ…λ¬Έ - νλ“(Pod),λν”λ¦¬μΉ΄μ„ΈνΈ(ReplicaSet),λ””ν”λ΅μ΄λ¨ΌνΈ(Deployment),μ„λΉ„μ¤(Service) - cmstown
      </title>
    <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport"
    content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
  <meta name="renderer" content="webkit">
  <meta http-equiv="Cache-Control" content="no-transform" />
  <meta http-equiv="Cache-Control" content="no-siteapp" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="format-detection" content="telephone=no,email=no,adress=no">
  
  <meta name="theme-color" content="#000000" />
  
  <meta http-equiv="window-target" content="_top" />
  
  
  <meta name="description" content="π•Έ μΏ λ²„λ„¤ν‹°μ¤ μ…λ¬Έ - νλ“(Pod),λν”λ¦¬μΉ΄μ„ΈνΈ(ReplicaSet),λ””ν”λ΅μ΄λ¨ΌνΈ(Deployment),μ„λΉ„μ¤(Service) π•Έ νλ“" />
  <meta name="generator" content="Hugo 0.73.0 with theme pure" />
  <title>[Kubernets/μΏ λ²„λ„¤ν‹°μ¤] 02. μΏ λ²„λ„¤ν‹°μ¤ μ…λ¬Έ - νλ“(Pod),λν”λ¦¬μΉ΄μ„ΈνΈ(ReplicaSet),λ””ν”λ΅μ΄λ¨ΌνΈ(Deployment),μ„λΉ„μ¤(Service) - cmstown</title>
  
  
  <link rel="stylesheet" href="http://blog.cmstown.com/css/style.min.9aaa883ebea87c2fd2d087c069cb2736c5f6cb2d52460262cad27bb9f932afc8.css">
  
  <link rel="stylesheet" href="https://cdn.staticfile.org/highlight.js/9.15.10/styles/github.min.css" async>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.4.2/tocbot.css" async>
  <meta property="og:title" content="[Kubernets/μΏ λ²„λ„¤ν‹°μ¤] 02. μΏ λ²„λ„¤ν‹°μ¤ μ…λ¬Έ - νλ“(Pod),λν”λ¦¬μΉ΄μ„ΈνΈ(ReplicaSet),λ””ν”λ΅μ΄λ¨ΌνΈ(Deployment),μ„λΉ„μ¤(Service)" />
<meta property="og:description" content="π•Έ μΏ λ²„λ„¤ν‹°μ¤ μ…λ¬Έ - νλ“(Pod),λν”λ¦¬μΉ΄μ„ΈνΈ(ReplicaSet),λ””ν”λ΅μ΄λ¨ΌνΈ(Deployment),μ„λΉ„μ¤(Service) π•Έ νλ“" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://blog.cmstown.com/2020/09/k8s_02/" />
<meta property="article:published_time" content="2020-09-11T15:49:19+09:00" />
<meta property="article:modified_time" content="2020-09-11T15:49:19+09:00" />
<meta itemprop="name" content="[Kubernets/μΏ λ²„λ„¤ν‹°μ¤] 02. μΏ λ²„λ„¤ν‹°μ¤ μ…λ¬Έ - νλ“(Pod),λν”λ¦¬μΉ΄μ„ΈνΈ(ReplicaSet),λ””ν”λ΅μ΄λ¨ΌνΈ(Deployment),μ„λΉ„μ¤(Service)">
<meta itemprop="description" content="π•Έ μΏ λ²„λ„¤ν‹°μ¤ μ…λ¬Έ - νλ“(Pod),λν”λ¦¬μΉ΄μ„ΈνΈ(ReplicaSet),λ””ν”λ΅μ΄λ¨ΌνΈ(Deployment),μ„λΉ„μ¤(Service) π•Έ νλ“">
<meta itemprop="datePublished" content="2020-09-11T15:49:19&#43;09:00" />
<meta itemprop="dateModified" content="2020-09-11T15:49:19&#43;09:00" />
<meta itemprop="wordCount" content="5034">



<meta itemprop="keywords" content="Devops," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="[Kubernets/μΏ λ²„λ„¤ν‹°μ¤] 02. μΏ λ²„λ„¤ν‹°μ¤ μ…λ¬Έ - νλ“(Pod),λν”λ¦¬μΉ΄μ„ΈνΈ(ReplicaSet),λ””ν”λ΅μ΄λ¨ΌνΈ(Deployment),μ„λΉ„μ¤(Service)"/>
<meta name="twitter:description" content="π•Έ μΏ λ²„λ„¤ν‹°μ¤ μ…λ¬Έ - νλ“(Pod),λν”λ¦¬μΉ΄μ„ΈνΈ(ReplicaSet),λ””ν”λ΅μ΄λ¨ΌνΈ(Deployment),μ„λΉ„μ¤(Service) π•Έ νλ“"/>

  <!--[if lte IE 9]>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
    <![endif]-->

  <!--[if lt IE 9]>
      <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
      <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
    <![endif]-->

</head>
  </head>

  
  

  <body class="main-center theme-black" itemscope itemtype="http://schema.org/WebPage"><header class="header" itemscope itemtype="http://schema.org/WPHeader">

<script async src="https://www.googletagmanager.com/gtag/js?id=G-PKRV60YBKY"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-PKRV60YBKY');
</script>
    <div class="slimContent">
      <div class="navbar-header">
        <div class="profile-block text-center">
          <a id="avatar" href="https://github.com/chlalstjd430" target="_blank">
            <img class="img-circle img-rotate" src="http://blog.cmstown.com/avatar.png" width="200" height="200">
          </a>
          <h2 id="name" class="hidden-xs hidden-sm">μµλ―Όμ„±</h2>
          <h3 id="title" class="hidden-xs hidden-sm hidden-md">27, μ­μ‹¤λ€ν•™κµ</h3>
          <small id="location" class="text-muted hidden-xs hidden-sm"><i class="icon icon-map-marker"></i>Seoul, Korea</small>
        </div><div class="search" id="search-form-wrap">
    <form class="search-form sidebar-form">
        <div class="input-group">
            <input type="text" class="search-form-input form-control" placeholder="Search" />
            <span class="input-group-btn">
                <button type="submit" class="search-form-submit btn btn-flat" onclick="return false;"><i
                        class="icon icon-search"></i></button>
            </span>
        </div>
        <div class="ins-search">
            <div class="ins-search-mask"></div>
            <div class="ins-search-container">
                <div class="ins-input-wrapper">
                    <input type="text" class="ins-search-input" placeholder="Type something..."
                        x-webkit-speech />
                    <button type="button" class="close ins-close ins-selectable" data-dismiss="modal"
                        aria-label="Close"><span aria-hidden="true">Γ—</span></button>
                </div>
                <div class="ins-section-wrapper">
                    <div class="ins-section-container"></div>
                </div>
            </div>
        </div>
    </form>
</div>
        <button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#main-navbar" aria-controls="main-navbar" aria-expanded="false">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
      </div>
      <nav id="main-navbar" class="collapse navbar-collapse" itemscope itemtype="http://schema.org/SiteNavigationElement" role="navigation">
        <ul class="nav navbar-nav main-nav">
            <li class="menu-item menu-item-home">
                <a href="/">
                    <i class="icon icon-home-fill"></i>
                  <span class="menu-title">Home</span>
                </a>
            </li>
            <li class="menu-item menu-item-archives">
                <a href="/posts/">
                    <i class="icon icon-archives-fill"></i>
                  <span class="menu-title">Posts</span>
                </a>
            </li>
            <li class="menu-item menu-item-categories">
                <a href="/categories/">
                    <i class="icon icon-folder"></i>
                  <span class="menu-title">Categories</span>
                </a>
            </li>
        </ul>
      </nav>
    </div>
  </header>

<aside class="sidebar" itemscope itemtype="http://schema.org/WPSideBar">
  <div class="slimContent">
    
      <div class="widget">
    <h3 class="widget-title">Board</h3>
    <div class="widget-body">
        <div id="board">
            <div class="content"><p>cms3136@gmail.com</p><p>- μ­μ‹¤λ€ν•™κµ κΈ€λ΅λ²λ―Έλ””μ–΄ν•™λ¶€</p><p>- YOURSSU λ°±μ—”λ“ κ°λ°μ</p><p>- YAPP 16κΈ°</p><p>- NEXTERS 17κΈ°</p><p>- NAVER WEBTOON μΈν„΄</p>
            </div>
        </div>
    </div>
</div>

      <div class="widget">
    <h3 class="widget-title"> Categories</h3>
    <div class="widget-body">
        <ul class="category-list">
            <li class="category-list-item"><a href="http://blog.cmstown.com/categories/2020-%EA%B3%84%ED%9A%8D/" class="category-list-link">2020-κ³„ν</a><span class="category-list-count">2</span></li>
            <li class="category-list-item"><a href="http://blog.cmstown.com/categories/2021-%EA%B3%84%ED%9A%8D/" class="category-list-link">2021-κ³„ν</a><span class="category-list-count">2</span></li>
            <li class="category-list-item"><a href="http://blog.cmstown.com/categories/aws/" class="category-list-link">aws</a><span class="category-list-count">3</span></li>
            <li class="category-list-item"><a href="http://blog.cmstown.com/categories/backend/" class="category-list-link">backend</a><span class="category-list-count">3</span></li>
            <li class="category-list-item"><a href="http://blog.cmstown.com/categories/clean-code/" class="category-list-link">clean-code</a><span class="category-list-count">9</span></li>
            <li class="category-list-item"><a href="http://blog.cmstown.com/categories/database/" class="category-list-link">database</a><span class="category-list-count">2</span></li>
            <li class="category-list-item"><a href="http://blog.cmstown.com/categories/design-pattern/" class="category-list-link">design-pattern</a><span class="category-list-count">8</span></li>
            <li class="category-list-item"><a href="http://blog.cmstown.com/categories/docker/" class="category-list-link">docker</a><span class="category-list-count">8</span></li>
            <li class="category-list-item"><a href="http://blog.cmstown.com/categories/it-%EC%A0%95%EB%B3%B4/" class="category-list-link">it-μ •λ³΄</a><span class="category-list-count">2</span></li>
            <li class="category-list-item"><a href="http://blog.cmstown.com/categories/java/" class="category-list-link">java</a><span class="category-list-count">1</span></li>
            <li class="category-list-item"><a href="http://blog.cmstown.com/categories/kafka/" class="category-list-link">kafka</a><span class="category-list-count">1</span></li>
            <li class="category-list-item"><a href="http://blog.cmstown.com/categories/kubernetes/" class="category-list-link">kubernetes</a><span class="category-list-count">3</span></li>
            <li class="category-list-item"><a href="http://blog.cmstown.com/categories/python/" class="category-list-link">python</a><span class="category-list-count">6</span></li>
            <li class="category-list-item"><a href="http://blog.cmstown.com/categories/spring/" class="category-list-link">spring</a><span class="category-list-count">11</span></li>
            <li class="category-list-item"><a href="http://blog.cmstown.com/categories/%EB%A6%AC%EC%95%A1%ED%8B%B0%EB%B8%8C-%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D/" class="category-list-link">λ¦¬μ•΅ν‹°λΈ-ν”„λ΅κ·Έλλ°</a><span class="category-list-count">2</span></li>
            <li class="category-list-item"><a href="http://blog.cmstown.com/categories/%EB%B0%B1%EC%A4%80-%EB%AC%B8%EC%A0%9C%ED%92%80%EC%9D%B4/" class="category-list-link">λ°±μ¤€-λ¬Έμ ν’€μ΄</a><span class="category-list-count">16</span></li>
            <li class="category-list-item"><a href="http://blog.cmstown.com/categories/%EC%95%8C%EA%B3%A0%EB%A6%AC%EC%A6%98/" class="category-list-link">μ•κ³ λ¦¬μ¦</a><span class="category-list-count">1</span></li>
            <li class="category-list-item"><a href="http://blog.cmstown.com/categories/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4-%EB%AC%B8%EC%A0%9C%ED%92%80%EC%9D%B4/" class="category-list-link">ν”„λ΅κ·Έλλ¨Έμ¤-λ¬Έμ ν’€μ΄</a><span class="category-list-count">22</span></li>
        </ul>
    </div>
</div>
      
<div class="widget">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget-body">
        <ul class="recent-post-list list-unstyled no-thumbnail">
            <li>
                <div class="item-inner">
                    <p class="item-title">
                        <a href="http://blog.cmstown.com/2021/01/2021_%EA%B3%84%ED%9A%8D/" class="title">2021 κ³„ν</a>
                    </p>
                    <p class="item-date">
                        <time datetime="2021-01-04 23:20:21 &#43;0900 KST" itemprop="datePublished">2021-01-04</time>
                    </p>
                </div>
            </li>
            <li>
                <div class="item-inner">
                    <p class="item-title">
                        <a href="http://blog.cmstown.com/2021/01/2020_%ED%9A%8C%EA%B3%A0%EB%A1%9D/" class="title">2020 νκ³ λ΅ - 3ν•™λ…„ ν•™λ¶€μƒμ—μ„ λ„¤μ΄λ²„ μΈν„΄ κ²½ν—κΉμ§€</a>
                    </p>
                    <p class="item-date">
                        <time datetime="2021-01-01 22:20:21 &#43;0900 KST" itemprop="datePublished">2021-01-01</time>
                    </p>
                </div>
            </li>
            <li>
                <div class="item-inner">
                    <p class="item-title">
                        <a href="http://blog.cmstown.com/2020/12/transactional_order/" class="title">[Spring(μ¤ν”„λ§)] @Order</a>
                    </p>
                    <p class="item-date">
                        <time datetime="2020-12-06 22:22:26 &#43;0900 KST" itemprop="datePublished">2020-12-06</time>
                    </p>
                </div>
            </li>
            <li>
                <div class="item-inner">
                    <p class="item-title">
                        <a href="http://blog.cmstown.com/2020/12/redis-vs-ehcache-vs-memcached/" class="title">[μΊμ‹(Cache)] redis VS ehcache VS memcached</a>
                    </p>
                    <p class="item-date">
                        <time datetime="2020-12-04 16:40:20 &#43;0900 KST" itemprop="datePublished">2020-12-04</time>
                    </p>
                </div>
            </li>
            <li>
                <div class="item-inner">
                    <p class="item-title">
                        <a href="http://blog.cmstown.com/2020/11/db_lock_in_treansaction/" class="title">InnoDB Lockκ³Ό Isolation</a>
                    </p>
                    <p class="item-date">
                        <time datetime="2020-11-19 16:32:20 &#43;0900 KST" itemprop="datePublished">2020-11-19</time>
                    </p>
                </div>
            </li>
        </ul>
    </div>
</div>
  </div>
</aside>

    
    
<aside class="sidebar sidebar-toc collapse" id="collapseToc" itemscope itemtype="http://schema.org/WPSideBar">
  <div class="slimContent">
    <h4 class="toc-title">Catalogue</h4>
    <nav id="toc" class="js-toc toc">

    </nav>
  </div>
</aside>
<main class="main" role="main"><div class="content">
  <article id="-" class="article article-type-" itemscope
    itemtype="http://schema.org/BlogPosting">
    
    <div class="article-header">
      <h1 itemprop="name">
  <a
    class="article-title"
    href="/2020/09/k8s_02/"
    >[Kubernets/μΏ λ²„λ„¤ν‹°μ¤] 02. μΏ λ²„λ„¤ν‹°μ¤ μ…λ¬Έ - νλ“(Pod),λν”λ¦¬μΉ΄μ„ΈνΈ(ReplicaSet),λ””ν”λ΅μ΄λ¨ΌνΈ(Deployment),μ„λΉ„μ¤(Service)</a
  >
</h1>

      <div class="article-meta">
        
<span class="article-date">
  <i class="icon icon-calendar-check"></i>&nbsp;
<a href="http://blog.cmstown.com/2020/09/k8s_02/" class="article-date">
  <time datetime="2020-09-11 15:49:19 &#43;0900 KST" itemprop="datePublished">2020-09-11</time>
</a>
</span>
<span class="article-category">
  <i class="icon icon-folder"></i>&nbsp;
  <a class="article-category-link" href="/categories/kubernetes/"> Kubernetes </a>
</span>  
  <span class="article-tag">
    <i class="icon icon-tags"></i>&nbsp;
    <a class="article-tag-link" href="/tags/devops/"> Devops </a>
  </span>

        <span class="post-comment"><i class="icon icon-comment"></i>&nbsp;<a href="/2020/09/k8s_02/#comments"
            class="article-comment-link">Comments</a></span>
		<span class="post-wordcount hidden-xs" itemprop="wordCount">Word Count: 5034words</span>
		<span class="post-readcount hidden-xs" itemprop="timeRequired">Read Count: 11minutes </span>
      </div>
    </div>
    <div class="article-entry marked-body js-toc-content" itemprop="articleBody">
      <h1 id="-μΏ λ²„λ„¤ν‹°μ¤-μ…λ¬Έ---νλ“podλν”λ¦¬μΉ΄μ„ΈνΈreplicasetλ””ν”λ΅μ΄λ¨ΌνΈdeploymentμ„λΉ„μ¤service-">π•Έ μΏ λ²„λ„¤ν‹°μ¤ μ…λ¬Έ - νλ“(Pod),λν”λ¦¬μΉ΄μ„ΈνΈ(ReplicaSet),λ””ν”λ΅μ΄λ¨ΌνΈ(Deployment),μ„λΉ„μ¤(Service) π•Έ</h1>
<h2 id="νλ“">νλ“</h2>
<p>νλ“(pod)λ” μ»¨ν…μ΄λ„κ°€ λ¨μΈ μ§‘ν•©μ²΄μ λ‹¨μ„λ΅, μ μ–΄λ„ ν•λ‚ μ΄μƒμ μ»¨ν…μ΄λ„λ΅ μ΄λ£¨μ–΄μ§„λ‹¤. μΏ λ²„λ„¤ν‹°μ¤λ¥Ό λ„μ»¤μ™€ ν•¨κ» μ‚¬μ©ν•λ‹¤λ©΄ νλ“λ” μ»¨ν…μ΄λ„ ν•λ‚ νΉμ€ μ»¨ν…μ΄λ„μ μ§‘ν•©μ²΄κ°€ λλ‹¤. μΏ λ²„λ„¤ν‹°μ¤μ—μ„λ” κ²°ν•©μ΄ κ°•ν• μ»¨ν…μ΄λ„λ¥Ό νλ“λ΅ λ¬¶μ–΄ μΌκ΄„ λ°°ν¬ν•λ‹¤.</p>
<p>νλ“λ” λ‹¤μ κ·Έλ¦Όμ—μ„ λ³΄λ“―μ΄ λ…Έλ“μ— λ°°μΉν•΄μ•Ό ν•λ‹¤. κ°™μ€ νλ“λ¥Ό μ—¬λ¬ λ…Έλ“μ— λ°°μΉν•  μλ„ μκ³  ν• λ…Έλ“μ— μ—¬λ¬ κ° λ°°μΉν•  μλ„ μλ‹¤. κ·Έλ¬λ‚ νλ“ ν•λ‚κ°€ μ—¬λ¬ λ…Έλ“μ— κ±Έμ³ λ°°μΉλ  μλ” μ—†λ‹¤.</p>
<p><img src="https://www.slipp.net/wiki/download/attachments/41583706/image2019-9-16_15-33-53.png?version=1&amp;modificationDate=1568624763000&amp;api=v2" alt="image"></p>
<br>
<h4 id="νλ“-μƒμ„±-λ°-λ°°ν¬ν•κΈ°">νλ“ μƒμ„± λ° λ°°ν¬ν•κΈ°</h4>
<p>κ·ΈλΌ μ΄μ  νλ“λ¥Ό μƒμ„±ν•΄ λ°°ν¬ν•΄ λ³΄μ. nginx-proxyμ™€ μ• ν”λ¦¬μΌ€μ΄μ…, 2κ°μ μ»¨ν…μ΄λ„λ¥Ό ν¬ν•¨ν•λ” νλ“λ¥Ό λ΅μ»¬ μΏ λ²„λ„¤ν‹°μ¤ ν™κ²½μ— λ°°ν¬ν•΄ λ³΄μ.</p>
<p>νλ“ μƒμ„±μ€ kubectlλ§ μ‚¬μ©ν•΄λ„ κ°€λ¥ν•μ§€λ§, λ²„μ „ κ΄€λ¦¬ κ΄€μ μ—μ„λ„ yaml νμΌλ΅ μ •μν•λ” κ²ƒμ΄ μΆ‹λ‹¤. μΏ λ²„λ„¤ν‹°μ¤μ μ—¬λ¬ κ°€μ§€ λ¦¬μ†μ¤λ¥Ό μ •μν•λ” νμΌμ„ <strong>λ§¤λ‹νμ¤νΈ νμΌ</strong> μ΄λΌκ³  ν•λ‹¤. niginxμ™€ echoλΌλ” μ• ν”λ¦¬μΌ€μ΄μ… λ‘ μ»¨ν…μ΄λ„λ΅ κµ¬μ„±λλ” νλ“λ¥Ό μ •μν• λ§¤λ‹νμ¤νΈ νμΌμ„ simple-pod.yamlμ΄λΌλ” μ΄λ¦„μΌλ΅ λ‹¤μκ³Ό κ°™μ΄ μ‘μ„±ν•λ‹¤.</p>
<pre><code class="language-yaml">apiVersion: v1
kind: Pod
metadata: 
  name: simple-echo
spec:
  containers:
  - name: nginx
    image: gihyodocker/nginx:latest
    env:
    - name: BACKEND_HOST
      value: localhost:8080
    ports:
    - containerPort: 80
  - name: echo
    image: gihyodocker/echo:latest
    ports:
    - containerPort: 8080
</code></pre>
<p>μ΄ μ„¤μ • νμΌμ λ‚΄μ©μ„ μ„¤λ…ν•κ² λ‹¤.</p>
<p><strong>kind</strong>λ” μ΄ νμΌμ—μ„ μ •μν•λ” μΏ λ²„λ„¤ν‹°μ¤ λ¦¬μ†μ¤μ μ ν•μ„ μ§€μ •ν•λ” μ†μ„±μ΄λ‹¤. kind μ†μ„±μ κ°’μ— λ”°λΌ spec μ•„λμ μ¤ν‚¤λ§κ°€ λ³€ν™”ν•λ‹¤.</p>
<p><strong>metadata</strong>λ” μ΄λ¦„ κ·Έλ€λ΅ λ¦¬μ†μ¤μ— λ¶€μ—¬λλ” λ©”νƒ€λ°μ΄ν„°λ‹¤. medatadata.name μ†μ„±μ κ°’μ΄ μ΄ λ¦¬μ†μ¤μ μ΄λ¦„μ΄ λλ‹¤.</p>
<p><strong>spec</strong>μ€ λ¦¬μ†μ¤λ¥Ό μ •μν•κΈ° μ„ν• μ†μ„±μΌλ΅, νλ“μ κ²½μ° νλ“λ¥Ό κµ¬μ„±ν•λ” μ»¨ν…μ΄λ„λ¥Ό containers μ•„λμ— μ •μν•λ‹¤.</p>
<p><strong>name</strong>μ€ μ»¨ν…μ΄λ„ μ΄λ¦„, <strong>image</strong>λ” λ„μ»¤ ν—λΈμ— μ €μ¥λ μ΄λ―Έμ§€ νƒκ·Έκ°’μ„ μ§€μ •ν•λ‹¤.</p>
<p><strong>ports</strong> μ†μ„±μ€ μ»¨ν…μ΄λ„κ°€ λ…Έμ¶μ‹ν‚¬(EXPOSE) ν¬νΈλ¥Ό μ§€μ •ν•λ‹¤.</p>
<p><strong>env</strong> μ†μ„±μ— ν™κ²½ λ³€μλ¥Ό μ—΄κ±°ν•  μ μλ‹¤. nginxλ” μ”μ²­μ ν”„λ΅μ‹± λ€μƒμ΄ λ  BACKEND_HOST κ°’μ΄ ν•„μ”ν•κΈ° λ•λ¬Έμ— μ΄ κ°’μ΄ μ„¤μ •λΌ μλ‹¤.</p>
<p>μ΄ νλ“λ¥Ό λ΅μ»¬ μΏ λ²„λ„¤ν‹°μ¤ ν΄λ¬μ¤ν„°μ— λ°°ν¬ν•΄ λ³΄κ² λ‹¤. λ§¤λ‹νμ¤νΈ νμΌμ λ‚΄μ©μ„ κ·Έλ€λ΅ λ°μ—¬ν•λ ¤λ©΄ λ‹¤μκ³Ό κ°™μ΄ kubectlμ—μ„ -f μµμ…μΌλ΅ λ§¤λ‹νμ¤νΈ νμΌμ— λ€ν• κ²½λ΅λ¥Ό μ§€μ •ν•κ³  apply λ…λ Ήμ„ μ‚¬μ©ν•λ‹¤.</p>
<pre><code>$ kubectl apply -f simple-pod.yaml
pod/simple-echo created
</code></pre>
<p>μ΄μ  νλ“κ°€ λ™μ‘ν•κΈ°λ” ν•μ§€λ§, μ•„μ§μ€ μ ‘κ·Όν•  μ μ—†λ‹¤. νλ“μ— μ ‘κ·Όν•λ” λ°©λ²•μ€ μ μ‹ ν›„μ— λ‹¤λ£¨λ„λ΅ ν•κ² λ‹¤.</p>
<br>
<h4 id="νλ“-λ‹¤λ£¨κΈ°">νλ“ λ‹¤λ£¨κΈ°</h4>
<p>λ§¤λ‹νμ¤νΈ νμΌλ΅ νλ“λ¥Ό μƒμ„±ν–λ‹¤. μ΄λ²μ—λ” νλ“λ¥Ό μ΅°μ‘ν•λ” κΈ°λ³Έ λ°©λ²•μ„ μ•μ•„λ³Έλ‹¤.</p>
<p>νλ“μ μƒνƒλ” λ‹¤μκ³Ό κ°™μ΄ λ©λ΅μ—μ„ ν™•μΈν•  μ μλ‹¤. STATUSκ°€ Runningμ΄λ©΄ νλ“ μ•μ λ¨λ“  μ»¨ν…μ΄λ„κ°€ μ‹¤ν–‰ μ¤‘μ΄λΌλ” μλ―Έλ‹¤. READY μΉΌλΌκ°’μ λ¶„λ¨λ” νλ“μ— μ •μλ μ»¨ν…μ΄λ„ μμ΄κ³  λ¶„μλ” μ‹¤ν–‰ μ‹¤ν–‰ μƒνƒμ μ»¨ν…μ΄λ„ μμ΄λ‹¤.</p>
<pre><code>$ kubectl get pod
NAME          READY   STATUS    RESTARTS   AGE
simple-echo   2/2     Running   0          35m
</code></pre>
<p>kubectlμ„ μ‚¬μ©ν•΄ <strong>μ»¨ν…μ΄λ„ μ•μ— μ ‘κ·Ό</strong> ν•  μλ„ μλ‹¤. νλ“ μ•μ μ»¨ν…μ΄λ„κ°€ μ—¬λ¬ κ°μΈ κ²½μ°μ—λ” -c μµμ…μ— μ»¨ν…μ΄λ„ λ…μ„ μ§€μ •ν•λ‹¤.</p>
<pre><code>$ kubectl exec -it simple-echo -c nginx /bin/bash
root@simple-echo:/#     
</code></pre>
<p><strong>kubectl log λ…λ Ή</strong> μΌλ΅ νλ“ μ•μ— μλ” μ»¨ν…μ΄λ„μ ν‘μ¤€ μ¶λ ¥μ„ ν™”λ©΄μ— μ¶λ ¥ν•  μ μλ‹¤. λ§μ°¬κ°€μ§€λ΅ -c μµμ…μΌλ΅ μ»¨ν…μ΄λ„λ…μ„ μ§€μ •ν•λ‹¤.</p>
<pre><code>$ kubectl logs -f simple-echo -c echo
2020/09/09 14:00:56 start server
</code></pre>
<p>νλ“λ¥Ό μ‚­μ ν•λ ¤λ©΄ kubectl delete pod λ…λ Ήμ„ μ‚¬μ©ν•λ‹¤. kubectl delete λ…λ Ήμ€ νλ“ μ™Έμ— λ¦¬μ†μ¤μ—λ„ μ ν¨ν•λ‹¤. λν• λ§¤λ‹νμ¤νΈ νμΌλ΅ νλ“λ¥Ό μ‚­μ ν•  μ μλ”λ°, μ΄ κ²½μ°μ—λ” λ§¤λ‹νμ¤νΈμ— μ‘μ„±λ λ¦¬μ†μ¤ μ „μ²΄κ°€ μ‚­μ λλ‹¤.</p>
<pre><code>$ kubectl delete pod simple-echo
</code></pre>
<pre><code>$ kubectl delte -f simple-pod.yaml
</code></pre>
<p><br><br></p>
<h2 id="λ ν”λ¦¬μΉ΄μ„ΈνΈ">λ ν”λ¦¬μΉ΄μ„ΈνΈ</h2>
<p>νλ“λ¥Ό μ •μν• λ§¤λ‹νμ¤νΈ νμΌλ΅λ” νλ“λ¥Ό ν•λ‚λ°–μ— μƒμ„±ν•  μ μ—†λ‹¤. κ·Έλ¬λ‚ μ–΄λ μ •λ„ κ·λ¨κ°€ λλ” μ• ν”λ¦¬μΌ€μ΄μ…μ„ κµ¬μ¶•ν•λ ¤λ©΄ κ°™μ€ νλ“λ¥Ό μ—¬λ¬ κ° μ‹¤ν–‰ν•΄ κ°€μ©μ„±μ„ ν™•λ³΄ν•΄μ•Ό ν•λ” κ²½μ°κ°€ μƒκΈ΄λ‹¤.</p>
<p>μ΄λ° κ²½μ°μ— μ‚¬μ©λλ” κ²ƒμ΄ <strong>λν”λ¦¬μΉ΄μ„ΈνΈ(ReplicaSet)</strong> λ‹¤. λν”λ¦¬μΉ΄ μ„ΈνΈλ” λ‘κ°™μ€ μ •μλ¥Ό κ°–λ” νλ“λ¥Ό μ—¬λ¬ κ° μƒμ„±ν•κ³  κ΄€λ¦¬ν•κΈ° μ„ν• λ¦¬μ†μ¤λ‹¤. νλ“μ μ •μ μμ²΄λ„ λ ν”λ¦¬μΉ΄ μ„ΈνΈλ¥Ό μ •μν• yaml νμΌμ— μ‘μ„±ν•λ―€λ΅ νλ“μ μ„¤μ • νμΌμ„ λ”°λ΅ λ‘ ν•„μ” μ—†μ΄ νμΌ ν•λ‚λ΅ μ •μλ¥Ό μ™„κ²°μ§€μ„ μ μλ‹¤. κ·Έλ¬λ©΄ simple-replicaset.yamlμ„ μ‘μ„±ν•΄λ³΄μ.</p>
<pre><code class="language-yaml">apiVersion: apps/v1
kind: ReplicaSet
metadata:
  name: echo
  labels:
    app: echo
spec:
  replicas: 3
  selector:
    matchLabels:
      app: echo
  template:
    metadata: 
      labels: 
        app: echo
    spec:
      containers:
      - name: nginx
        image: gihyodocker/nginx:latest
        env:
        - name: BACKEND_HOST
          value: localhost:8080
        ports:
        - containerPort: 80
      - name: echo
        image: gihyodocker/echo:latest
        ports:
        - containerPort: 8080
</code></pre>
<p><strong>replicas</strong>λ” λ ν”λ¦¬μΉ΄μ„ΈνΈμ—μ„ λ§λ“¤ νλ“μ λ³µμ λ³Έ μλ‹¤. κ·Έλ¦¬κ³  <strong>template</strong> μ†μ„±μ λ‚΄μ©μ€ νλ“ μ •μμ™€ κ°™λ‹¤. μ΄ λ ν”λ¦¬μΉ΄μ„ΈνΈλ¥Ό λ°°ν¬ν•λ©΄ νλ“κ°€ 3κ° λ§λ“¤μ–΄μ§„ κ²ƒμ„ ν™•μΈν•  μ μλ‹¤. κ°™μ€ νλ“κ°€ μ—¬λΏ λ³µμ λ κ²ƒμ΄λ―€λ΅ νλ“λ…μ— echo-xxxμ²λΌ λ¬΄μ‘μ„λ΅ μƒμ„±λ μ ‘λ―Έμ‚¬κ°€ λ¶™λ”λ‹¤.</p>
<pre><code>$ kubectl apply -f simple-replicaset.yaml
replicaset.apps/echo created
</code></pre>
<pre><code>$ kubectl get pod
NAME          READY   STATUS    RESTARTS   AGE
echo-2sf2h    2/2     Running   0          45s
echo-q76w2    2/2     Running   0          45s
echo-tlknw    2/2     Running   0          45s
</code></pre>
<p>λ ν”λ¦¬μΉ΄μ„ΈνΈλ¥Ό μ΅°μ‘(yaml νμΌμ„ μμ •) νλ“μ μλ¥Ό μ¤„μ΄λ©΄ μ¤„μΈ κ°μλ§νΌ νλ“κ°€ μ‚­μ λλ‹¤. μ‚­μ λ νλ“λ” λ³µμ›ν•  μ μ—†κΈ° λ•λ¬Έμ— μ›Ή μ• ν”λ¦¬μΌ€μ΄μ… κ°™μ€ stateless νλ“λ¥Ό μ‚¬μ©ν•κΈ°μ— μ λ¦¬ν•λ‹¤.</p>
<p>μƒμ„±ν• λ ν”λ¦¬μΉ΄μ„ΈνΈλ¥Ό λ§¤λ‹νμ¤νΈ νμΌμ„ μ΄μ©ν•΄ λ‹¤μκ³Ό κ°™μ΄ μ‚­μ κ°€ κ°€λ¥ν•λ‹¤.</p>
<pre><code>$ kubectl delete -f simple-replicaset.yaml
replicaset.apps &quot;echo&quot; deleted

$ kubectl get pod
NAME          READY   STATUS        RESTARTS   AGE
echo-2sf2h    2/2     Terminating   0          5m18s
echo-q76w2    2/2     Terminating   0          5m18s
echo-tlknw    2/2     Terminating   0          5m18s
</code></pre>
<p><br><br></p>
<h2 id="λ””ν”λ΅μ΄λ¨ΌνΈ">λ””ν”λ΅μ΄λ¨ΌνΈ</h2>
<p>λ ν”λ¦¬μΉ΄μ„ΈνΈλ³΄λ‹¤ μƒμ„μ— ν•΄λ‹Ήν•λ” λ¦¬μ†μ¤λ΅ **λ””ν”λ΅μ΄λ¨ΌνΈ(deployment)**κ°€ μλ‹¤. λ””ν”λ΅μ΄λ¨ΌνΈλ” μ• ν”λ¦¬μΌ€μ΄μ… λ°°ν¬(deploy)μ κΈ°λ³Έ λ‹¨μ„κ°€ λλ” λ¦¬μ†μ¤λ‹¤. λν• λ””ν”λ΅μ΄λ¨ΌνΈλ” λ ν”λ¦¬μΉ΄μ„ΈνΈλ¥Ό κ΄€λ¦¬ν•κ³  λ‹¤λ£¨κΈ° μ„ν• λ¦¬μ†μ¤λ‹¤.</p>
<p>νλ“, λ ν”λ¦¬μΉ΄μ„ΈνΈ, λ””ν”λ΅μ΄λ¨ΌνΈμ κ΄€κ³„λ¥Ό μ •λ¦¬ν•λ©΄ λ‹¤μ κ·Έλ¦Όκ³Ό κ°™λ‹¤.</p>
<p><img src="https://www.bluematador.com/hs-fs/hubfs/blog/new/Kubernetes%20Deployments%20-%20Rolling%20Update%20Configuration/Deployment%20Diagrams%20-%20static.png?width=600&amp;name=Deployment%20Diagrams%20-%20static.png" alt="image"></p>
<p>μ¶μ² : <a href="https://www.bluematador.com/blog/kubernetes-deployments-rolling-update-configuration">https://www.bluematador.com/blog/kubernetes-deployments-rolling-update-configuration</a></p>
<br>
<p>λ””ν”λ΅μ΄λ¨ΌνΈλ¥Ό μ •μν• λ§¤λ‹νμ¤νΈ νμΌ simple-deployment.yamlμ„ λ‹¤μκ³Ό κ°™μ΄ μ‘μ„±ν•λ‹¤</p>
<pre><code class="language-yaml">apiVersion: apps/v1
kind: Deployment
metadata:
  name: echo
  labels:
    app: echo
spec:
  replicas: 3
  selector:
    matchLabels:
      app: echo
  template:
    metadata: 
      labels: 
        app: echo
    spec:
      containers:
      - name: nginx
        image: gihyodocker/nginx:latest
        env:
        - name: BACKEND_HOST
          value: localhost:8080
        ports:
        - containerPort: 80
      - name: echo
        image: gihyodocker/echo:latest
        ports:
        - containerPort: 8080
</code></pre>
<p>λ””ν”λ΅μ΄λ¨ΌνΈμ μ •μλ” λ ν”λ¦¬μΉ΄μ„ΈνΈμ μ •μμ™€ ν¬κ² λ‹¤λ¥΄μ§€ μ•λ‹¤. μ°¨μ΄κ°€ μλ‹¤λ©΄ λ””ν”λ΅μ΄λ¨ΌνΈκ°€ λ ν”λ¦¬μΉ΄μ„ΈνΈμ λ¦¬λΉ„μ „ κ΄€λ¦¬λ¥Ό ν•  μ μλ‹¤λ” μ  μ •λ„λ‹¤.</p>
<p>μ΄ λ§¤λ‹νμ¤νΈ νμΌμ„ μ–΄λ–¤ kubectl λ…λ Ήμ„ μ‹¤ν–‰ν–λ”μ§€ κΈ°λ΅μ„ λ‚¨κΈ°λ” μµμ…μΈ <strong>&ndash;record</strong>λ¥Ό λ¶™μ—¬ kubectlλ΅ ν΄λ¬μ¤ν„°μ— λ°μν•λ‹¤.</p>
<pre><code>$ kubectl apply -f simple-deployment.yaml --record
deployment.apps/echo created
</code></pre>
<p>kubectl λ…λ ΉμΌλ΅ μƒνƒλ¥Ό ν™•μΈν•΄ λ³΄μ. λ””ν”λ΅μ΄λ¨ΌνΈλ” λ¬Όλ΅ μ΄κ³ , λ ν”λ¦¬μΉ΄μ„ΈνΈμ™€ νλ“κ°€ μƒμ„±λ κ²ƒμ„ ν™•μΈν•  μ μλ‹¤.</p>
<pre><code>$ kubectl get pod,replicaset,deployment --selector app=echo
NAME                        READY   STATUS    RESTARTS   AGE
pod/echo-59dfb6bdf7-7lg62   2/2     Running   0          2m1s
pod/echo-59dfb6bdf7-wj8k6   2/2     Running   0          2m1s
pod/echo-59dfb6bdf7-xvwkc   2/2     Running   0          2m1s

NAME                              DESIRED   CURRENT   READY   AGE
replicaset.apps/echo-59dfb6bdf7   3         3         3       2m1s

NAME                   READY   UP-TO-DATE   AVAILABLE   AGE
deployment.apps/echo   3/3     3            3           2m1s
choeminseong-ui-MacBook-Pro:04.docekr_pod choeminseong$ 
</code></pre>
<p>λ””ν”λ΅μ΄λ¨ΌνΈμ λ¦¬λΉ„μ „μ€ λ‹¤μκ³Ό κ°™μ΄ kubectl rollout history λ…λ ΉμΌλ΅ ν™•μΈν•  μ μλ‹¤. ν„μ¬λ” μ²«λ²μ§Έ λ°μμ΄λ―€λ΅ REVISION=1μ΄λ‹¤.</p>
<pre><code>$ kubectl rollout history deployment echo
deployment.apps/echo 
REVISION  CHANGE-CAUSE
1         kubectl apply --filename=simple-deployment.yaml --record=true
</code></pre>
<h3 id="λ ν”λ¦¬μΉ΄μ„ΈνΈμ-μƒμ• μ£ΌκΈ°">λ ν”λ¦¬μΉ΄μ„ΈνΈμ μƒμ• μ£ΌκΈ°</h3>
<p>μ‹¤μ  μ΄μμ—μ„ μΏ λ²„λ„¤ν‹°μ¤λ” λ””ν”λ΅μ΄λ¨ΌνΈλ¥Ό λ‹¨μ„λ΅ μ• ν”λ¦¬μΌ€μ΄μ…μ„ λ°°ν¬ν•λ‹¤. λ””ν”λ΅μ΄λ¨ΌνΈκ°€ κ΄€λ¦¬ν•λ” λ ν”λ¦¬μΉ΄μ„ΈνΈλ” μ§€μ •λ κ°μλ§νΌ νλ“λ¥Ό ν™•λ³΄ν•κ±°λ‚ νλ“λ¥Ό μƒλ΅μ΄ λ²„μ „μΌλ΅ κµμ²΄ν•κ±°λ‚ μ΄μ „ λ²„μ „μΌλ΅ λ΅¤λ°±ν•λ” λ“± μ¤‘μ”ν• μ—­ν• μ„ ν•λ‹¤. κ·Έλ¬λ―€λ΅ μ• ν”λ¦¬μΌ€μ΄μ… λ°°ν¬λ¥Ό λ°”λ¥΄κ² μ΄μν•λ ¤λ©΄ λ””ν”λ΅μ΄λ¨ΌνΈ μ•μ—μ„ λ ν”λ¦¬μΉ΄μ„ΈνΈκ°€ μ–΄λ–»κ² λ™μ‘ν•λ”μ§€ νμ•…ν•  μ μμ–΄μ•Ό ν•λ‹¤. λ””ν”λ΅μ΄λ¨ΌνΈλ¥Ό μμ •ν•λ©΄ λ ν”λ¦¬μΉ΄μ„ΈνΈκ°€ μƒλ΅ μƒμ„±λκ³  κΈ°μ΅΄ λ ν”λ¦¬μΉ΄μ„ΈνΈμ™€ κµμ²΄λλ‹¤.</p>
<p>μ–΄λ–¤ κ²½μ°μ— μƒ λ ν”λ¦¬μΉ΄μ„ΈνΈκ°€ μƒμ„±λλ”μ§€ μ‚΄ν΄λ³΄μ.</p>
<h4 id="νλ“-κ°μλ§-μμ •ν•λ©΄-λ ν”λ¦¬μΉ΄μ„ΈνΈκ°€-μƒλ΅-μƒμ„±λμ§€-μ•μ">νλ“ κ°μλ§ μμ •ν•λ©΄ λ ν”λ¦¬μΉ΄μ„ΈνΈκ°€ μƒλ΅ μƒμ„±λμ§€ μ•μ</h4>
<p>μ°μ„± νλ“ κ°μλ§μ„ μμ •ν•΄ λ³΄κ² λ‹¤. λ§¤λ‹νμ¤νΈ νμΌμ—μ„ replicas κ°’μ„ 3μ—μ„ 4λ΅ μμ •ν•΄ λ°μν•κ³  μ μ©ν•΄λ³΄μ.</p>
<pre><code># κ°μ λ°μ μ „ #

$ kubectl get pod
NAME                    READY   STATUS    RESTARTS   AGE
echo-59dfb6bdf7-7lg62   2/2     Running   0          17m
echo-59dfb6bdf7-wj8k6   2/2     Running   0          17m
echo-59dfb6bdf7-xvwkc   2/2     Running   0          17m
</code></pre>
<p>λ‹¤μμ—μ„ λ³΄λ“―μ΄ μ›λ μλ νλ“λ” κ·Έλ€λ΅ μκ³ , μ»¨ν…μ΄λ„κ°€ ν•λ‚ μƒλ΅ μƒμ„±λ κ²ƒμ„ μ• μ μλ‹¤.</p>
<pre><code># κ°μ λ°μ ν›„ #

$ kubectl apply -f simple-deployment.yaml --record
deployment.apps/echo configured

$ kubectl get pod
NAME                    READY   STATUS    RESTARTS   AGE
echo-59dfb6bdf7-7lg62   2/2     Running   0          17m
echo-59dfb6bdf7-c47zf   2/2     Running   0          16s
echo-59dfb6bdf7-wj8k6   2/2     Running   0          17m
echo-59dfb6bdf7-xvwkc   2/2     Running   0          17m
</code></pre>
<p>λ ν”λ¦¬μΉ΄μ„ΈνΈκ°€ μƒλ΅ μƒμ„±λλ‹¤λ©΄ λ¦¬λΉ„μ „ λ²νΈκ°€ 2μΌ ν…λ°, κ·Έ λ‚΄μ©μ€ μ¶λ ¥λμ§€ μ•λ”λ‹¤. replicas κ°’λ§ λ³€κ²½ν•΄μ„λ” λ ν”λ¦¬μΉ΄μ„ΈνΈμ κµμ²΄κ°€ μΌμ–΄λ‚μ§€ μ•λ”λ‹¤λ” κ²ƒμ„ μ• μ μλ‹¤.</p>
<pre><code>$ kubectl rollout history deployment echo
deployment.apps/echo 
REVISION  CHANGE-CAUSE
1         kubectl apply --filename=simple-deployment.yaml --record=true
</code></pre>
<h4 id="μ»¨ν…μ΄λ„-μ •μ-μμ •">μ»¨ν…μ΄λ„ μ •μ μμ •</h4>
<p>μ»¨ν…μ΄λ„ μ΄λ―Έμ§€κ°€ μμ •λ κ²½μ°λ¥Ό ν™•μΈν•΄ λ³΄μ, simple-deployment.yaml νμΌμ echo μ»¨ν…μ΄λ„ μ΄λ―Έμ§€λ¥Ό λ‹¤μκ³Ό κ°™μ΄ gihyodocker/echo:patcedλ΅ μμ •ν•λ‹¤.</p>
<pre><code class="language-yaml"> - name: echo
        image: gihyodocker/echo:patched
        ports:
        - containerPort: 8080
</code></pre>
<pre><code>$ kubectl apply -f simple-deployment.yaml --record
deployment.apps/echo configured
</code></pre>
<p>κ·Έλ¬λ©΄ λ‹¤μκ³Ό κ°™μ΄ μƒλ΅μ΄ νλ“κ°€ μƒμ„±λκ³  κΈ°μ΅΄ νλ“λ” λ‹¨κ³„μ μΌλ΅ μ •μ§€λ¨μ„ μ• μ μλ‹¤.</p>
<pre><code>$ kubectl get pod --selector app=echo
NAME                    READY   STATUS        RESTARTS   AGE
echo-59dfb6bdf7-7lg62   2/2     Terminating   0          22m
echo-59dfb6bdf7-wj8k6   0/2     Terminating   0          22m
echo-6c77cf9d47-8gq2m   2/2     Running       0          38s
echo-6c77cf9d47-fc82h   2/2     Running       0          34s
echo-6c77cf9d47-nwnrp   2/2     Running       0          50s
echo-6c77cf9d47-wlxgn   2/2     Running       0          49s
</code></pre>
<p>λ””ν”λ΅μ΄λ¨ΌνΈμ λ¦¬λΉ„μ „μ„ ν™•μΈν•΄ λ³΄λ©΄ REVISION=2κ°€ μƒμ„±λλ‹¤. kubectl applyλ¥Ό μ‹¤ν–‰ν–μ„ λ–„ λ””ν”λ΅μ΄λ¨ΌνΈμ λ‚΄μ©μ΄ λ³€κ²½λ κ²½μ° μƒλ΅μ΄ λ¦¬λΉ„μ „μ΄ μƒμ„±λλ‹¤.</p>
<pre><code>$ kubectl rollout history deployment echo
deployment.apps/echo 
REVISION  CHANGE-CAUSE
1         kubectl apply --filename=simple-deployment.yaml --record=true
2         kubectl apply --filename=simple-deployment.yaml --record=true
</code></pre>
<br>
<h3 id="λ΅¤λ°±-μ‹¤ν–‰ν•κΈ°">λ΅¤λ°± μ‹¤ν–‰ν•κΈ°</h3>
<p>λ””ν”λ΅μ΄λ¨ΌνΈλ” λ¦¬λΉ„μ „ λ²νΈκ°€ κΈ°λ΅λλ―€λ΅ νΉμ • λ¦¬λΉ„μ „μ λ‚΄μ©μ„ ν™•μΈν•  μ μλ‹¤.</p>
<pre><code>$ kubectl rollout history deployment echo --revision=1
deployment.apps/echo with revision #1
Pod Template:
  Labels:	app=echo
	pod-template-hash=59dfb6bdf7
  Annotations:	kubernetes.io/change-cause: kubectl apply --filename=simple-deployment.yaml --record=true
  Containers:
   nginx:
    Image:	gihyodocker/nginx:latest
    Port:	80/TCP
    Host Port:	0/TCP
    Environment:
      BACKEND_HOST:	localhost:8080
    Mounts:	&lt;none&gt;
   echo:
    Image:	gihyodocker/echo:latest
    Port:	8080/TCP
    Host Port:	0/TCP
    Environment:	&lt;none&gt;
    Mounts:	&lt;none&gt;
  Volumes:	&lt;none&gt;
</code></pre>
<p><strong>undo</strong>λ¥Ό μ‹¤ν–‰ν•λ©΄ λ””ν”λ΅μ΄λ¨ΌνΈκ°€ λ°”λ΅ μ§μ „ λ¦¬λΉ„μ „μΌλ΅ λ΅¤λ°±λλ‹¤.</p>
<pre><code>$ kubectl rollout undo deployment echo
deployment.apps/echo rolled back
choeminseong-ui-MacBook-Pro:04.docekr_pod 
</code></pre>
<p>λ””ν”λ΅μ΄λ¨ΌνΈλ” λ‹¤μκ³Ό κ°™μ΄ λ§¤λ‹νμ¤νΈ νμΌμ„ μ΄μ©ν•΄μ„ μ‚­μ ν•λ‹¤. λ””ν”λ΅μ΄λ¨ΌνΈ λ° κ΄€λ ¨λ λ ν”λ¦¬μΉ΄μ„ΈνΈμ™€ νλ“κ°€ ν•¨κ» μ‚­μ λλ‹¤.</p>
<pre><code>$ kubectl delete -f simple-deployment.yaml
deployment.apps &quot;echo&quot; deleted
</code></pre>
<p><br><br></p>
<h2 id="μ„λΉ„μ¤">μ„λΉ„μ¤</h2>
<p>μ„λΉ„μ¤λ” μΏ λ²„λ„¤ν‹°μ¤ ν΄λ¬μ¤ν„° μ•μ—μ„ νλ“μ μ§‘ν•©(μ£Όλ΅ λ ν”λ¦¬μΉ΄μ„ΈνΈ)μ— λ€ν• κ²½λ΅λ‚ μ„λΉ„μ¤ λ””μ¤μ»¤λ²„λ¦¬(API μ£Όμ†κ°€ λ™μ μΌλ΅ λ°”λ€λ” κ²½μ°μ—λ„ ν΄λΌμ΄μ–ΈνΈκ°€ μ ‘μ† λ€μƒμ„ λ°”κΎΈμ§€ μ•κ³  ν•λ‚μ μ΄λ¦„μΌλ΅ μ ‘κ·Όν•  μ μλ„λ΅ ν•λ” κΈ°λ¥)λ¥Ό μ κ³µν•λ” λ¦¬μ†μ¤λ‹¤. μ„λΉ„μ¤μ λ€μƒμ΄ λλ” νλ“λ” μ„λΉ„μ¤μ—μ„ μ •μν•λ” λ μ΄λΈ” μ…€λ ‰ν„°λ΅ μ •ν•΄μ§„λ‹¤.</p>
<p>μλ¥Ό λ“¤μ–΄, simple-replicaset-with-label.yamlμ΄λΌλ” μ΄λ¦„μΌλ΅ λ‹¤μκ³Ό κ°™μ€ λ§¤λ‹νμ¤νΈ νμΌμ„ μ‘μ„±ν•΄ λ ν”λ¦¬μΉ΄μ„ΈνΈλ¥Ό 2κ° μ •μν•λ‹¤. μ•μ„ μ •μν–λ echo λ ν”λ¦¬μΉ΄μ„ΈνΈμ™€ κ±°μ κ°™μΌλ‚, release μ†μ„±κ°’κ³Ό springκ³Ό summerλ΅ λ‚λ‰λ‹¤.</p>
<pre><code class="language-yaml">apiVersion: apps/v1
kind: ReplicaSet
metadata:
  name: echo-spring
  labels:
    app: echo
    release: spring
spec:
  replicas: 1
  selector:
    matchLabels:
      app: echo
      release: spring
  template:
    metadata:
      labels:
        app: echo
        release: spring
    spec:
      containers:
      - name: nginx
        image: gihyodocker/nginx:latest
        env:
        - name: BACKEND_HOST
          value: localhost:8080
        ports:
        - containerPort: 80
      - name: echo
        image: gihyodocker/echo:latest
        ports:
        - containerPort: 8080

---

apiVersion: apps/v1
kind: ReplicaSet
metadata:
  name: echo-summer
  labels:
    app: echo
    release: summer
spec:
  replicas: 2
  selector:
    matchLabels:
      app: echo
      release: summer
  template:
    metadata:
      labels:
        app: echo
        release: summer
    spec:
      containers:
      - name: nginx
        image: gihyodocker/nginx:latest
        env:
        - name: BACKEND_HOST
          value: localhost:8080
        ports:
        - containerPort: 80
      - name: echo
        image: gihyodocker/echo:latest
        ports:
        - containerPort: 8080
</code></pre>
<pre><code>$ kubectl apply -f simple-replicaset-with-label.yaml
replicaset.apps/echo-spring created
replicaset.apps/echo-summer created


$ kubectl get pod -l app=echo -l release=spring
NAME                READY   STATUS    RESTARTS   AGE
echo-spring-5fp66   2/2     Running   0          75s

$ kubectl get pod -l app=echo -l release=summer
NAME                READY   STATUS    RESTARTS   AGE
echo-summer-nff8t   2/2     Running   0          78s
echo-summer-zkrkg   2/2     Running   0          78s
</code></pre>
<p>release=summerμΈ νλ“λ§ μ ‘κ·Όν•  μ μλ” μ„λΉ„μ¤λ¥Ό μƒμ„±ν•΄ λ³΄μ. λ‹¤μκ³Ό κ°™μ΄ simple-service.yaml νμΌμ„ μ‘μ„±ν•λ‹¤. spec.selector μ†μ„±κ°’μΌλ΅ μ„λΉ„μ¤ λ€μƒμΌλ΅ μ‚Όμ„ νλ“μ λ μ΄λΈ”κ°’μ„ μ„¤μ •ν•λ‹¤.</p>
<pre><code class="language-yaml">apiVersion: v1
kind: Service
metadata:
  name: echo
spec:
  selector:
    app: echo
    release: summer
  ports:
  - name: http
    port: 80
</code></pre>
<p>μ΄ μ„λΉ„μ¤μ™€ λ μ΄λΈ”λ΅ κµ¬λ¶„λλ” κ° νλ“μ κ΄€κ³„λ¥Ό λ‹¤μ κ·Έλ¦Όμ— λ‚νƒ€λƒλ‹¤. νλ‹¤μ λ μ΄λΈ”μ΄ μ„λΉ„μ¤μ— μ •μλ μ…€λ ‰ν„° κ°’κ³Ό μΌμΉν•λ©΄ ν•΄λ‹Ή νλ“λ” κ·Έ μ„λΉ„μ¤μ λ€μƒμ΄ λλ―€λ΅ μ„λΉ„μ¤λ¥Ό κ²½μ ν•΄ νΈλν”½μ΄ λ“¤μ–΄ μ¨λ‹¤.</p>
<p><img src="https://user-images.githubusercontent.com/50758600/92919192-176e3d00-f46b-11ea-8346-0db69753d45b.png" alt="service"></p>
<p>simple-service.yamlμ„ λ°μν•΄ μ„λΉ„μ¤λ¥Ό μƒμ„±ν•λ‹¤.</p>
<pre><code>$ kubectl apply -f simple-service.yaml
service/echo created

$ kubectl get svc echo
NAME   TYPE        CLUSTER-IP   EXTERNAL-IP   PORT(S)   AGE
echo   ClusterIP   10.97.4.73   &lt;none&gt;        80/TCP    19s
</code></pre>
<p>μ‹¤μ λ΅λ„ release=summerμΈ νλ“μ—λ§ νΈλν”½μ΄ μ „λ‹¬λλ”μ§€ ν™•μΈν•΄ λ³΄μ.</p>
<p>μ„λΉ„μ¤λ” κΈ°λ³Έμ μΌλ΅ μΏ λ²„λ„¤ν‹°μ¤ ν΄λ¬μ¤ν„° μ•μ—μ„λ§ μ ‘κ·Όν•  μ μλ‹¤. κ·Έλ¬λ―€λ΅ μΏ λ²„λ„¤ν‹°μ¤ ν΄λ¬μ¤ν„° μ•μ—μ„ λ””λ²„κΉ…μ© μ„μ‹ μ»¨ν…μ΄λ„λ¥Ό λ°°ν¬ν•κ³  curl λ…λ ΉμΌλ΅ HTTP μ”μ²­μ„ λ³΄λ‚΄ ν™•μΈν•΄ λ³Ό κ²ƒμ΄λ‹¤. λ””λ²„κ·Έ μ»¨ν…μ΄λ„μ— λ“¤μ–΄κ°€μ„ http://echo/ λ΅ μ•„λ¬΄λ ‡κ²λ‚ HTTP μ”μ²­μ„ λ³΄λ‚Έλ‹¤.</p>
<pre><code>$ kubectl run -i --rm --tty debug --image=gihyodocker/fundamental:0.1.0 --restart=Never -- bash -il
If you don't see a command prompt, try pressing enter.
debug:/# curl http://echo/
Hello Docker!!debug:/# 
</code></pre>
<p>μ—¬κΈ°μ„ &lsquo;http://echo/&rsquo; λ΅ μ ‘κ·Όμ΄ κ°€λ¥ν• μ΄μ λ” μΏ λ²„λ„¤ν‹°μ¤ ν΄λ¬μ¤ν„°μ DNSλ” μ„λΉ„μ¤λ¥Ό μ„λΉ„μ¤λ….λ„¤μ„μ¤νμ΄μ¤λ….svc.localλ΅ μ—°κ²°ν•΄μ¤€λ‹¤.</p>
<p>μλ¥Ό λ“¤μ–΄, μ„μ echosms default λ„¤μ„μ¤νμ΄μ¤μ— λ°°μΉλΌ μμΌλ―€λ΅ λ‹¤μκ³Ό κ°™λ‹¤.</p>
<blockquote>
<p><a href="http://echo.default.svc.local">http://echo.default.svc.local</a></p>
</blockquote>
<p>μ—¬κΈ°μ„ svc.local λ¶€λ¶„μ€ μƒλµν•  μ μκ³ , κ°™μ€ λ„¤μ„μ¤νμ΄μ¤λΌλ©΄ μ„λΉ„μ¤λ…λ§μΌλ΅ μ°Έμ΅°κ°€ κ°€λ¥ν•λ‹¤.</p>
<p>λ μ΄λΈ”μ΄ summerμΈ νλ“λ¥Ό ν•λ‚ κ³¨λΌ λ΅κ·Έλ¥Ό ν™•μΈν•΄ λ³΄λ©΄ &ldquo;received request&quot;κ°€ μ¶λ ¥λλ‹¤. λ°λ©΄ λ μ΄λΈ”μ΄ springμΈ νλ“λ” λ΅κ·Έκ°€ μ¶λ ¥λμ§€ μ•λ”λ‹¤.</p>
<pre><code>$ kubectl logs -f echo-summer-zkrkg -c echo
2020/09/11 07:37:41 start server
2020/09/11 14:01:07 received request
</code></pre>
<br>
<h4 id="clusterip-μ„λΉ„μ¤">ClusterIP μ„λΉ„μ¤</h4>
<p>μ„λΉ„μ¤μ—λ„ μ—¬λ¬ κ°€μ§€ μΆ…λ¥κ°€ μμ–΄μ„ κ·Έ μΆ…λ¥λ¥Ό yaml νμΌμ—μ„ μ§€μ •ν•  μ μλ‹¤. μΆ…λ¥μ κΈ°λ³Έκ°’μ€ <strong>ClusterIP μ„λΉ„μ¤</strong> λ‹¤.</p>
<p>ClusterIP μ„λΉ„μ¤λ¥Ό μ‚¬μ©ν•λ©΄ μΏ λ²„λ„¤ν‹°μ¤ ν΄λ¬μ¤ν„°μ λ‚΄λ¶€ IP μ£Όμ†μ— μ„λΉ„μ¤λ¥Ό κ³µκ°ν•  μ μλ‹¤. μ΄λ¥Ό μ΄μ©ν•΄ μ–΄λ–¤ νλ“μ—μ„ λ‹¤λ¥Έ νλ“ κ·Έλ£ΉμΌλ΅ μ ‘κ·Όν•  λ–„ μ„λΉ„μ¤λ¥Ό κ±°μ³ κ°€λ„λ΅ ν•  μ μμΌλ©°, μ„λΉ„μ¤λ…μΌλ΅ λ„¤μ„ λ μ΅Έλ£¨μ…μ΄ κ°€λ¥ν•΄μ§„λ‹¤. λ‹¤λ§, μ™Έλ¶€λ΅λ¶€ν„°λ” μ ‘κ·Όμ΄ λ¶κ°€λ¥ν•λ‹¤.</p>
<h4 id="nodeport-μ„λΉ„μ¤">NodePort μ„λΉ„μ¤</h4>
<p>NodePort μ„λΉ„μ¤λ” ν΄λ¬μ¤ν„° μ™Έλ¶€μ—μ„ μ ‘κ·Όν•  μ μλ” μ„λΉ„μ¤λ‹¤.</p>
<p>NodePort μ„λΉ„μ¤λ” ClusterIPλ¥Ό λ§λ“ λ‹¤λ” μ μ€ ClusterIP μ„λΉ„μ¤μ™€ κ°™λ‹¤. κ° λ…Έλ“μ—μ„ μ„λΉ„μ¤ ν¬νΈλ΅ μ ‘μ†ν•κΈ° μ„ν• κΈ€λ΅λ² ν¬νΈλ¥Ό κ°λ°©ν•λ‹¤λ” μ μ΄ μ°¨μ΄μ μ΄λ‹¤.</p>
<pre><code class="language-yaml">apiVersion: v1
kind: Service
metadata:
  name: echo
spec:
  type: NodePort
  selector:
    app: echo
  ports:
  - name: http
    port: 80
</code></pre>
<pre><code>$ kubectl apply -f simple-nodeport-service.yaml
service/echo configured
choeminseong-ui-MacBook-Pro:04.docekr_pod choe

$ kubectl get svc echo
NAME   TYPE       CLUSTER-IP   EXTERNAL-IP   PORT(S)        AGE
echo   NodePort   10.97.4.73   &lt;none&gt;        80:30727/TCP   115m
</code></pre>
<p>NodePort μ„λΉ„μ¤λ¥Ό μƒμ„±ν–λ‹¤λ©΄ μ„μ 80:30727/TCPλΌκ³  λ‚μ™”λ“―μ΄ λ…Έλ“μ ν¬νΈ 31058λ¥Ό ν†µν•΄ μ„λΉ„μ¤μ— μ ‘κ·Όν•  μ μλ‹¤. μ΄λ¥Ό μ΄μ©ν•΄ μ„λΉ„μ¤λ¥Ό κµ¬λ²„λ„¤ν‹°μ¤ ν΄λ¬μ¤ν„° μ™Έλ¶€λ΅ κ³µκ°ν•  μ μλ‹¤.</p>
<pre><code>$ curl http://localhost:30727
Hello Docker!!
</code></pre>
<h4 id="loadbalancer-μ„λΉ„μ¤">LoadBalancer μ„λΉ„μ¤</h4>
<p>LoadBalancer μ„λΉ„μ¤λ” λ΅μ»¬ μΏ λ²„λ„¤ν‹°μ¤ ν™κ²½μ—μ„λ” μ‚¬μ©ν•  μ μ—†λ” μ„λΉ„μ¤λ‹¤. μ΄ μ„λΉ„μ¤λ” μ£Όλ΅ κ° ν΄λΌμ°λ“ ν”λ«νΌμ—μ„ μ κ³µν•λ” λ΅λ“ λ°Έλ°μ„μ™€ μ—°λ™ν•κΈ° μ„ν•΄ μƒμ©λλ‹¤.</p>
<h4 id="externalname-μ„λΉ„μ¤">ExternalName μ„λΉ„μ¤</h4>
<p>ExternalName μ„λΉ„μ¤λ” μ…€λ ‰ν„°λ„ ν¬νΈ μ •μλ„ μ—†λ‹¤. μΏ λ²„λ„¤ν‹°μ¤ ν΄λ¬μ¤ν„°μ—μ„ μ™Έλ¶€ νΈμ¤νΈλ¥Ό λ„¤μ„ λ μ΅Έλ£¨μ…ν•κΈ° μ„ν• λ³„λ…μ„ μ κ³µν•λ‹¤.</p>
<p>μλ¥Ό λ“¤μ–΄, λ‹¤μκ³Ό κ°™μ€ μ„λΉ„μ¤λ¥Ό μƒμ„±ν•λ©΄ cms.krμ„ cmsλ΅ μ°Έμ΅°ν•  μ μλ‹¤.</p>
<pre><code class="language-yaml">apiVersion: v1
kind: Service
metadata:
  name: cms
spec:
  type: ExternalName
  externalName: cms.kr
</code></pre>
<p><br><br><br><br><br><br><br><br><br><br></p>
<p><strong>μ°Έκ³ </strong></p>
<p><a href="http://www.yes24.com/Product/Goods/70893433">λ„μ»¤/μΏ λ²„λ„¤ν‹°μ¤λ¥Ό ν™μ©ν• μ»¨ν…μ΄λ„ κ°λ° μ‹¤μ „ μ…λ¬Έ</a></p>

    </div>
    <div class="article-footer">
<blockquote class="mt-2x">
  <ul class="post-copyright list-unstyled">
    <li class="post-copyright-link hidden-xs">
      <strong>Permalink: </strong>
      <a href="http://blog.cmstown.com/2020/09/k8s_02/" title="[Kubernets/μΏ λ²„λ„¤ν‹°μ¤] 02. μΏ λ²„λ„¤ν‹°μ¤ μ…λ¬Έ - νλ“(Pod),λν”λ¦¬μΉ΄μ„ΈνΈ(ReplicaSet),λ””ν”λ΅μ΄λ¨ΌνΈ(Deployment),μ„λΉ„μ¤(Service)" target="_blank" rel="external">http://blog.cmstown.com/2020/09/k8s_02/</a>
    </li>
    <li class="post-copyright-license">
      <strong>LicenseοΌ</strong><a href="http://creativecommons.org/licenses/by/4.0/deed.zh" target="_blank" rel="external">CC BY 4.0 CN</a>
    </li>
  </ul>
</blockquote>

<div class="panel panel-default panel-badger">
  <div class="panel-body">
    <figure class="media">
      <div class="media-left">
        <a href="https://github.com/chlalstjd430" target="_blank" class="img-burn thumb-sm visible-lg">
          <img src="http://blog.cmstown.com/avatar.png" class="img-rounded w-full" alt="">
        </a>
      </div>
      <div class="media-body">
        <h3 class="media-heading"><a href="https://github.com/chlalstjd430" target="_blank"><span class="text-dark">μµλ―Όμ„±</span><small class="ml-1x">27, μ­μ‹¤λ€ν•™κµ</small></a></h3>
        <div>cms3136@gmail.com</div>
      </div>
    </figure>
  </div>
</div>
    </div>
  </article>
<section id="comments">
    <div id="disqus_thread">
        <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    </div>
</section>

</div><nav class="bar bar-footer clearfix" data-stick-bottom>
    <div class="bar-inner">
        <ul class="pager pull-left">
            <li class="prev">
                <a href="http://blog.cmstown.com/2020/09/k8s_01/" title="[Kubernets/μΏ λ²„λ„¤ν‹°μ¤] 01. μΏ λ²„λ„¤ν‹°μ¤ μ…λ¬Έ - μΏ λ²„λ„¤ν‹°μ¤λ€?"><i
                        class="icon icon-angle-left"
                        aria-hidden="true"></i><span>&nbsp;&nbsp;Older</span></a>
            </li>
            <li class="next">
                <a href="http://blog.cmstown.com/2020/09/k8s_03/"
                    title="[Kubernets/μΏ λ²„λ„¤ν‹°μ¤] 03. μΏ λ²„λ„¤ν‹°μ¤ μ…λ¬Έ - μΈκ·Έλ μ¤(ingress)"><span>Newer&nbsp;&nbsp;</span><i
                        class="icon icon-angle-right" aria-hidden="true"></i></a>
            </li>
            
            <li class="toggle-toc">
                <a class="toggle-btn collapsed" data-toggle="collapse" href="#collapseToc" aria-expanded="false"
                    title="Catalogue" role="button">
                    <span>[&nbsp;</span><span>Catalogue</span>
                    <i class="text-collapsed icon icon-anchor"></i>
                    <i class="text-in icon icon-close"></i>
                    <span>]</span>
                </a>
            </li>
        </ul>
        <div class="bar-right">
            <div class="share-component" data-sites=""
                data-mobile-sites="weibo,qq,qzone"></div>
        </div>
    </div>
</nav>

</main><footer class="footer" itemscope itemtype="http://schema.org/WPFooter">
<ul class="social-links">
    <li><a href="https://github.com/chlalstjd430" target="_blank" title="github" data-toggle=tooltip data-placement=top >
            <i class="icon icon-github"></i></a></li>
    <li><a href="https://www.linkedin.com/in/minseong-choi-a541531aa/" target="_blank" title="linkedin" data-toggle=tooltip data-placement=top >
            <i class="icon icon-linkedin"></i></a></li>
    <li><a href="http://blog.cmstown.com/index.xml" target="_blank" title="rss" data-toggle=tooltip data-placement=top >
            <i class="icon icon-rss"></i></a></li>
</ul>
  <div class="copyright">
    &copy;2017  -
    2021
    <div class="publishby">
        Theme by <a href="https://github.com/xiaoheiAh" target="_blank"> xiaoheiAh </a>base on<a href="https://github.com/xiaoheiAh/hugo-theme-pure" target="_blank"> pure</a>.
    </div>
  </div>
</footer>

<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-MML-AM_SVG"></script>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
            showMathMenu: false, //disables context menu
            tex2jax: {
            inlineMath: [ ['$','$'], ['\\(','\\)'] ]
           }
    });
</script>


<script src="https://cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.min.js"></script>
<script>
    window.jQuery || document.write('<script src="js/jquery.min.js"><\/script>')
</script>
<script type="text/javascript" src="https://cdn.staticfile.org/highlight.js/9.15.10/highlight.min.js"></script>
<script type="text/javascript" src="https://cdn.staticfile.org/highlight.js/9.15.10/languages/python.min.js" defer></script>
<script type="text/javascript" src="https://cdn.staticfile.org/highlight.js/9.15.10/languages/javascript.min.js" defer></script><script>
    hljs.configure({
        tabReplace: '    ', 
        classPrefix: ''     
        
    })
    hljs.initHighlightingOnLoad();
</script>
<script src="http://blog.cmstown.com/js/application.min.bdeb64b910570b6c41badc6a05b7afb0c8ad9efd8525de3c7257d59e786326a3.js"></script>
<script src="http://blog.cmstown.com/js/plugin.min.51ff8c7317566f82259170fa36e09c4493adc9b9378b427a01ad3f017ebac7dd.js"></script>

<script>
    (function (window) {
        var INSIGHT_CONFIG = {
            TRANSLATION: {
                POSTS: 'Posts',
                PAGES: 'Pages',
                CATEGORIES: 'Categories',
                TAGS: 'Tags',
                UNTITLED: '(Untitled)',
            },
            ROOT_URL: 'http:\/\/blog.cmstown.com',
            CONTENT_URL: 'http:\/\/blog.cmstown.com\/searchindex.json ',
        };
        window.INSIGHT_CONFIG = INSIGHT_CONFIG;
    })(window);
</script>
<script type="text/javascript" src="http://blog.cmstown.com/js/insight.min.a343cd9a5a7698336b28ef3a7c16a3a1b1d2d5fb17dc8ed04022bbe08cc5459073a15bdafa3a8a58cdd56080784bdd69fa70b1ae8597565c799c57ed00f0e120.js" defer></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.4.2/tocbot.min.js"></script>
<script>
    tocbot.init({
        
        tocSelector: '.js-toc',
        
        contentSelector: '.js-toc-content',
        
        headingSelector: 'h1, h2, h3',
        
        hasInnerContainers: true,
    });
</script>

<script>
    (function() { 
    var d = document, s = d.createElement('script');
    s.src = 'https://' + 'https-chlalstjd430-github-io' + '.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
    })();
</script>
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'G-PKRV60YBKY', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

  </body>
</html>
